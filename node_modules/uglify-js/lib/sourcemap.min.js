"use strict";
function SourceMap(b) {
	b = defaults(b, {file: null, root: null, orig: null, orig_line_diff: 0, dest_line_diff: 0});
	var d = new MOZ_SourceMap.SourceMapGenerator({file: b.file, sourceRoot: b.root});
	var a = b.orig && new MOZ_SourceMap.SourceMapConsumer(b.orig);

	function c(h, f, j, k, g, e) {
		if (a) {
			var i = a.originalPositionFor({line: k, column: g});
			if (i.source === null) {
				return
			}
			h = i.source;
			k = i.line;
			g = i.column;
			e = i.name
		}
		d.addMapping({
			generated: {line: f + b.dest_line_diff, column: j},
			original: {line: k + b.orig_line_diff, column: g},
			source: h,
			name: e
		})
	}

	return {
		add: c, get: function () {
			return d
		}, toString: function () {
			return d.toString()
		}
	}
};