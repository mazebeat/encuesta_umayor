$(document).ready(function () {
	$(window).scroll(function () {
		if ($(this).scrollTop() > 350) {
			$("#go-top").fadeIn(350)
		} else {
			$("#go-top").fadeOut(350)
		}
	});
	$("#go-top").click(function (b) {
		b.preventDefault();
		$("html, body").animate({scrollTop: 0}, 800)
	}).tooltip("show");
	$("#btn_neg").click(function (d) {
		d.preventDefault();
		$(".politicas").remove();
		var c = $(this).parents("div.alert");
		c.find("h4").remove();
		c.find("p").remove();
		c.append('<p><i class="fa fa-check fa-fw"></i>Gracias por tu tiempo, ¡Tu opinión es muy importante!</p>');
		c.removeClass("alert-warning").addClass("alert-success");
		$.get("logout", function (a) {
			if (a == "OK") {
				setTimeout('window.location.href="http://www.umayor.cl/";', 5000)
			}
		})
	});
	$("#modal1_ok").click(function (b) {
		b.preventDefault();
		$("#modal1").modal("toggle");
		$.get("addexception", function (a) {
			if (a === "OK") {
				setTimeout('window.location.href="http://www.umayor.cl/";', 5000)
			}
		})
	});
	$("#login_form").bootstrapValidator({
		excluded: [":disabled", ":hidden", ":not(:visible)"],
		fields: {
			rut: {
				message: "El RUT no es valido",
				validators: {
					notEmpty: {message: "El campo RUT es requerido"}, callback: {
						callback: function (c, d) {
							return $.validateRut(c)
						}, message: "El campo RUT es incorrecto"
					}, stringLength: {min: 8, max: 9, message: "El campo RUT debe tener entre 8 y 9 caracteres"}
				}
			}
		}
	});
	$("#survey_form").bootstrapValidator({
		excluded: [":disabled", ":hidden", ":not(:visible)"],
		fields: {
			"pregunta_1[value]": {
				container: "#error_p1",
				validators: {
					notEmpty: {message: "Campo requerido "},
					choice: {min: 1, message: "Debe seleccionar al menos una opción"}
				}
			},
			"pregunta_2[value]": {
				container: "#error_p2",
				validators: {
					notEmpty: {message: "Campo requerido "},
					choice: {min: 1, message: "Debe seleccionar al menos una opción"}
				}
			},
			"pregunta_3[value]": {
				container: "#error_p3",
				validators: {
					notEmpty: {message: "Campo requerido "},
					choice: {min: 1, message: "Debe seleccionar al menos una opción"}
				}
			},
			"pregunta_4[value]": {
				container: "#error_p4",
				validators: {
					notEmpty: {message: "Campo requerido "},
					choice: {min: 1, message: "Debe seleccionar al menos una opción"}
				}
			},
			"pregunta_1[text]": {
				validators: {
					notEmpty: {message: "Campo requerido"},
					stringLength: {max: 250, message: "Debe tener un máximo de 250 caracteres"}
				}
			},
			"pregunta_2[text]": {
				validators: {
					notEmpty: {message: "Campo requerido"},
					stringLength: {max: 250, message: "Debe tener un máximo de 250 caracteres"}
				}
			},
			"pregunta_3[text]": {
				validators: {
					notEmpty: {message: "Campo requerido"},
					stringLength: {max: 250, message: "Debe tener un máximo de 250 caracteres"}
				}
			}
		}
	})
});
function onFormError(c) {
	c.preventDefault();
	$("html, body").animate({scrollTop: $(".errors").offset().top}, 1000);
	var d = '<div class="errors alert alert-danger">' + $username + ", necesitamos respuesta a todas tus preguntas</div>";
	$(".errors").append(d)
}
function onFormSuccess(b) {
	$(".errors").empty()
}
$("textarea").keyup(function () {
	$(this).parent().find("small#count").text("Caracteres: " + $(this).val().length)
});
$(".table td").hover(function () {
	$(this).find(".iradio_square-red").addClass("hover")
}, function () {
	$(this).find(".iradio_square-red").removeClass("hover")
}).click(function (b) {
	b.preventDefault();
	$(this).find(".iradio_square-red").iCheck("toggle")
});
$("input[type=radio]").iCheck({
	radioClass: "iradio_square-red",
	increaseArea: "20%",
	labelHover: true,
	cursor: true
}).on("ifChecked", function (d) {
	d.preventDefault();
	var f = $(this).attr("name");
	var e = $(this).val();
	$('select[name="' + f + '"]').select2("val", e);
	$("#survey_form").bootstrapValidator("revalidateField", f)
});
$("select").select2({
	width: "100%",
	containerCssClass: "",
	dropdownAutoWidth: true,
	dropdownCssClass: "text-center"
}).change(function (d) {
	d.preventDefault();
	var f = $(this).attr("name");
	var e = d.val;
	$('input[type=radio][name="' + f + '"][value=' + e++ + "]").iCheck("toggle");
	$("#survey_form").bootstrapValidator("revalidateField", f)
});